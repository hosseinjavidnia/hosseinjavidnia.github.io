<html>
  <head>
    <script src="https://skulpt.org/js/skulpt.min.js" type="text/javascript"></script>
    <script src="https://skulpt.org/js/skulpt-stdlib.js" type="text/javascript"></script>
  </head>
  <body>
    <h3>My Custom Skulpt Interpreter</h3>
    
    <textarea id="my-code" cols="40" rows="10">
import 
print(f"Today is {datetime.date.today()}")
print(25 * 4)
    </textarea><br/>
    <button type="button" onclick="runCode()">Run</button>
    
    <pre id="my-output"></pre> <script type="text/javascript">
      function runCode() {
        var code = document.getElementById("my-code").value;
        var outputEl = document.getElementById("my-output");
        
        outputEl.innerHTML = ''; // Clear previous output
        
        Sk.pre = "my-output"; // Tell Skulpt where to print
        Sk.configure({output: (text) => {
            outputEl.innerHTML = outputEl.innerHTML + text;
        }});
        
        var myPromise = Sk.misceval.asyncToPromise(() => {
            return Sk.importMainWithBody("<stdin>", false, code, true);
        });
        
        myPromise.catch((err) => {
            outputEl.innerHTML = outputEl.innerHTML + err.toString();
        });
      }
    </script>
  </body>
</html>
